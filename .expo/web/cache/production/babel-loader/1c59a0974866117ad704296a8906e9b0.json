{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import*as React from'react';import TextInput from\"react-native-web/dist/exports/TextInput\";export default(function(Navigator,navigatorConfig){var _class,_temp;return _temp=_class=function(_React$Component){_inherits(KeyboardAwareNavigator,_React$Component);var _super=_createSuper(KeyboardAwareNavigator);function KeyboardAwareNavigator(){var _this;_classCallCheck(this,KeyboardAwareNavigator);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_defineProperty(_assertThisInitialized(_this),\"_previouslyFocusedTextInput\",null);_defineProperty(_assertThisInitialized(_this),\"_handleGestureBegin\",function(){_this._previouslyFocusedTextInput=TextInput.State.currentlyFocusedInput?TextInput.State.currentlyFocusedInput():TextInput.State.currentlyFocusedField();if(_this._previouslyFocusedTextInput){TextInput.State.blurTextInput(_this._previouslyFocusedTextInput);}_this.props.onGestureBegin&&_this.props.onGestureBegin();});_defineProperty(_assertThisInitialized(_this),\"_handleGestureCanceled\",function(){if(_this._previouslyFocusedTextInput){TextInput.State.focusTextInput(_this._previouslyFocusedTextInput);}_this.props.onGestureCanceled&&_this.props.onGestureCanceled();});_defineProperty(_assertThisInitialized(_this),\"_handleGestureEnd\",function(){_this._previouslyFocusedTextInput=null;_this.props.onGestureFinish&&_this.props.onGestureFinish();});_defineProperty(_assertThisInitialized(_this),\"_handleTransitionStart\",function(transitionProps,prevTransitionProps){if(transitionProps.index!==prevTransitionProps.index){var currentField=TextInput.State.currentlyFocusedInput?TextInput.State.currentlyFocusedInput():TextInput.State.currentlyFocusedField();if(currentField){TextInput.State.blurTextInput(currentField);}}var onTransitionStart=_this.props.onTransitionStart||navigatorConfig.onTransitionStart;onTransitionStart&&onTransitionStart(transitionProps,prevTransitionProps);});return _this;}_createClass(KeyboardAwareNavigator,[{key:\"render\",value:function render(){return React.createElement(Navigator,_extends({},this.props,{onGestureBegin:this._handleGestureBegin,onGestureCanceled:this._handleGestureCanceled,onGestureEnd:this._handleGestureEnd,onTransitionStart:this._handleTransitionStart}));}}]);return KeyboardAwareNavigator;}(React.Component),_defineProperty(_class,\"router\",Navigator.router),_defineProperty(_class,\"navigationOptions\",Navigator.navigationOptions),_temp;});","map":{"version":3,"sources":["createKeyboardAwareNavigator.js"],"names":["React","Navigator","TextInput","transitionProps","prevTransitionProps","currentField","onTransitionStart","navigatorConfig","render","_handleTransitionStart"],"mappings":"miDAAA,MAAO,GAAP,CAAA,KAAA,KAAA,OAAA,C,+DAGA,eAAe,SAAA,SAAA,CAAA,eAAA,CAAA,CAAA,GAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MAAA,+HACwC,iCAAA,sFAAA,IAAA,0CAAA,IAAA,wBAAA,6CAAA,IAAA,GAAA,eAAA,+BAAA,6BAAA,CAAA,IAAA,CAAA,CAAA,eAAA,+BAAA,qBAAA,CAK7B,UAAM,CAC1B,MAAA,2BAAA,CAAmCE,SAAS,CAATA,KAAAA,CAAAA,qBAAAA,CAC/BA,SAAS,CAATA,KAAAA,CAD+BA,qBAC/BA,EAD+BA,CAE/BA,SAAS,CAATA,KAAAA,CAFJ,qBAEIA,EAFJ,CAGA,GAAI,MAAJ,2BAAA,CAAsC,CACpCA,SAAS,CAATA,KAAAA,CAAAA,aAAAA,CAA8B,MAA9BA,2BAAAA,EACD,CACD,MAAA,KAAA,CAAA,cAAA,EAA6B,MAAA,KAAA,CAA7B,cAA6B,EAA7B,CAZiD,CAAA,CAAA,CAAA,eAAA,+BAAA,wBAAA,CAe1B,UAAM,CAC7B,GAAI,MAAJ,2BAAA,CAAsC,CACpCA,SAAS,CAATA,KAAAA,CAAAA,cAAAA,CAA+B,MAA/BA,2BAAAA,EACD,CACD,MAAA,KAAA,CAAA,iBAAA,EAAgC,MAAA,KAAA,CAAhC,iBAAgC,EAAhC,CAnBiD,CAAA,CAAA,CAAA,eAAA,+BAAA,mBAAA,CAsB/B,UAAM,CACxB,MAAA,2BAAA,CAAA,IAAA,CACA,MAAA,KAAA,CAAA,eAAA,EAA8B,MAAA,KAAA,CAA9B,eAA8B,EAA9B,CAxBiD,CAAA,CAAA,CAAA,eAAA,+BAAA,wBAAA,CA2B1B,SAAA,eAAA,CAAA,mBAAA,CAA0C,CAIjE,GAAIC,eAAe,CAAfA,KAAAA,GAA0BC,mBAAmB,CAAjD,KAAA,CAAyD,CACvD,GAAMC,CAAAA,YAAY,CAAGH,SAAS,CAATA,KAAAA,CAAAA,qBAAAA,CACjBA,SAAS,CAATA,KAAAA,CADiBA,qBACjBA,EADiBA,CAEjBA,SAAS,CAATA,KAAAA,CAFJ,qBAEIA,EAFJ,CAGA,GAAA,YAAA,CAAkB,CAChBA,SAAS,CAATA,KAAAA,CAAAA,aAAAA,CAAAA,YAAAA,EACD,CACF,CAED,GAAMI,CAAAA,iBAAiB,CACrB,MAAA,KAAA,CAAA,iBAAA,EAAgCC,eAAe,CADjD,iBAAA,CAEAD,iBAAiB,EACfA,iBAAiB,CAAA,eAAA,CADnBA,mBACmB,CADnBA,CA1CiD,CAAA,CAAA,CAAA,aAAA,CADxC,yDA+CXE,iBAAS,CACP,MACE,CAAA,KAAA,CAAA,aAAA,CAAA,SAAA,CAAA,QAAA,CAAA,EAAA,CACM,KADN,KAAA,CAAA,CAEE,cAAc,CAAE,KAFlB,mBAAA,CAGE,iBAAiB,CAAE,KAHrB,sBAAA,CAIE,YAAY,CAAE,KAJhB,iBAAA,CAKE,iBAAiB,CAAE,KAAKC,sBAL1B,CAAA,CAAA,CADF,CASD,CAzDU,oCACwBT,KAAK,CAA1C,SADa,CAAA,CAAA,eAAA,CAAA,MAAA,CAAA,QAAA,CAEKC,SAAS,CAFd,MAAA,CAAA,CAAA,eAAA,CAAA,MAAA,CAAA,mBAAA,CAGgBA,SAAS,CAHzB,iBAAA,CAAA,CAAA,KAAA,CAAf,CAAA","sourcesContent":["import * as React from 'react';\nimport { TextInput } from 'react-native';\n\nexport default (Navigator, navigatorConfig) =>\n  class KeyboardAwareNavigator extends React.Component {\n    static router = Navigator.router;\n    static navigationOptions = Navigator.navigationOptions;\n    _previouslyFocusedTextInput = null;\n\n    _handleGestureBegin = () => {\n      this._previouslyFocusedTextInput = TextInput.State.currentlyFocusedInput\n        ? TextInput.State.currentlyFocusedInput()\n        : TextInput.State.currentlyFocusedField();\n      if (this._previouslyFocusedTextInput) {\n        TextInput.State.blurTextInput(this._previouslyFocusedTextInput);\n      }\n      this.props.onGestureBegin && this.props.onGestureBegin();\n    };\n\n    _handleGestureCanceled = () => {\n      if (this._previouslyFocusedTextInput) {\n        TextInput.State.focusTextInput(this._previouslyFocusedTextInput);\n      }\n      this.props.onGestureCanceled && this.props.onGestureCanceled();\n    };\n\n    _handleGestureEnd = () => {\n      this._previouslyFocusedTextInput = null;\n      this.props.onGestureFinish && this.props.onGestureFinish();\n    };\n\n    _handleTransitionStart = (transitionProps, prevTransitionProps) => {\n      // TODO: We should not even have received the transition start event\n      // in the case where the index did not change, I believe. We\n      // should revisit this after 2.0 release.\n      if (transitionProps.index !== prevTransitionProps.index) {\n        const currentField = TextInput.State.currentlyFocusedInput\n          ? TextInput.State.currentlyFocusedInput()\n          : TextInput.State.currentlyFocusedField();\n        if (currentField) {\n          TextInput.State.blurTextInput(currentField);\n        }\n      }\n\n      const onTransitionStart =\n        this.props.onTransitionStart || navigatorConfig.onTransitionStart;\n      onTransitionStart &&\n        onTransitionStart(transitionProps, prevTransitionProps);\n    };\n\n    render() {\n      return (\n        <Navigator\n          {...this.props}\n          onGestureBegin={this._handleGestureBegin}\n          onGestureCanceled={this._handleGestureCanceled}\n          onGestureEnd={this._handleGestureEnd}\n          onTransitionStart={this._handleTransitionStart}\n        />\n      );\n    }\n  };\n"]},"metadata":{},"sourceType":"module"}